#!/bin/bash

alias ner='ne ./config/routes.rb'
alias rs='rails s'
alias rc='rails c'
alias rr="rrout"
alias migrate="rake db:migrate"
alias goc="gor && cd app/controllers"
alias gom="gor && cd app/models"
alias gov="gor && cd app/views"
alias goa="gor && cd app/assets"

function gor()
{
    path=`find_rails_app_root.rb`
    if [ "$?" == "0" ]; then
	cd $path
	return 0
    else
	echo "Error: no rails app found" > /dev/stderr
	return 1
    fi
}

function gogems()
{
    path=`find_ruby_gems.rb`
    if [ "$?" == "0" ]; then
	cd $path
	return 0
    else
	echo "Error: folder found" > /dev/stderr
	return 1
    fi
}

function rrout()
{
    rake routes | grep "$1"
}

function reset_db()
{
    path=`find_rails_app_root.rb`
    if [ "$?" == "0" ]; then
	rm -f "$path/db/development.sqlite3"
	rm -f "$path/db/test.sqlite3"
	rake db:create
	rake db:migrate
	rake db:seed
	return 0
    else
	echo "Error: no rails app found" > /dev/stderr
	return 1
    fi
}
